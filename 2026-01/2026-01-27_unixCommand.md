## あらためて`UNIXコマンド`の復習など

- `CUI` または `CLI`: <br>**コマンド**(文字)入力によって操るインターフェイスのこと。*(Character-based User Interface / Command-Line Interface)*

### Tips

  - `date`: 現在時刻
  - `cal`: カレンダー

  - `TABキー`: 多くの環境では、<br>1回押すと → 文字列が**補完**される<br>2回押すと → **補完候補の一覧**が表示される

  - `Ctrl + L` or `clear`: 画面表示をクリアする
  - `Ctrl + U`: 入力中のコマンドをクリアする
  - `Ctrl + C`: フォアグラウンドで実行中のプロセスを中止する

  - `コマンド --help`: 使用可能な**オプション**が一覧表示される
  - `man コマンド`: そのコマンドの**マニュアル**を表示

  - `history`: <br>入力したコマンドの**履歴**が、履歴番号(インデックス)を添えて一覧表示される

  #### 「**コマンド履歴**」を活用するコマンド

  | コマンド | 実行される操作 |
  |:---:| --- |
  | `!インデックス` | 「入力したインデックスのコマンド」を実行 |
  | `!!` | 「直前のコマンド」を実行 |
  | `コマンド !$` | 直前で実行したコマンドに渡した「最後の引数」を<br>`!$`で再利用できる |
  | `!文字列` | 直近で実行した「文字列で始まるコマンド」を実行 |
  | `!文字列:p` | 直近で実行した「文字列で始まるコマンド」を<br>実行せずに表示|
  | `Ctrl + R` + 文字列 | コマンド履歴を検索<br>🤛 *`Enter`で実行*<br>🤛 *検索結果がヒットしない場合は`Ctrl + R`を繰り返す*<br>🤛 *検索の停止は`Ctrl + C`* |


### ディレクトリの操作

  - `pwd`: <br>現在居るディレクトリ *(Present Working Directory)*
  - `cd ディレクトリのパス`: <br>指定したディレクトリへ移動 *(Change Directory)* 🤛 *たんに`cd`とすると`ホームディレクトリ`へ移動する*

  - `mkdir ディレクトリ名`: <br>ディレクトリに名前をつけて生成 *(Make Directory)*
  - `mv ファイル名 ディレクトリ名/`: <br>指定したファイルを指定したディレクトリ下へ移動 *(Move)*
  - `mv 変更前のディレクトリ名/ 変更後のディレクトリ名`: <br>ディレクトリ名を変更
  - `rmdir ディレクトリ名`: <br>指定したディレクトリを削除 *(Remove Directory)*
  <br>⚠️ *ディレクトリが空でない場合は中にあるファイルを移動させてから実行するか、`rm -r`で中のファイルごと削除する*

  - `mkdir -p 親となるディレクトリ名/子となるディレクトリ名`: <br>深い階層にディレクトリを生成する  🤛 *(parents)*
  - `cp -r 元のディレクトリ名 作りたいディレクトリ名`: <br>ディレクトリの中にあるファイルも含めてコピーして生成する *(Recursive)*

  #### 絶対パス
  | コマンド表記 | 対応するディレクトリ |
  |:--:|:---:|
  | `/` | ルートディレクトリ |
  | `~` | ホームディレクトリ |

  #### 相対パス
  | コマンド表記 | 対応するディレクトリ |
  | :---: | --- |
  | `.` | 現在のディレクトリ |
  | `..` | ひとつ上のディレクトリ |
  | `../..` | ふたつ上のディレクトリ |
  | `../../etc` | ふたつ上に遡って、その下の階層のディレクトリを指す |

  #### シンボリックリンク

  - `ln -s ディレクトリやファイルの絶対パス リンク名`: <br>頻繁にアクセスするディレクトリやファイルに、**エイリアス**のような機能を設定できる *(`ln`: Link / `-s`: Symbolic)*

  - `rm シンボリックリンク名`: <br>「シンボリックリンクを設定した**ファイル**」へのリンクを削除 <br>🤛 *リンク先ファイルは削除されない*

  - `rm -r シンボリックリンク名`: <br>「シンボリックリンクを設定した**ディレクトリ**」へのリンクを削除 <br>🤛 *リンク先ディレクトリは削除されない*


### ファイルの操作

- `touch ファイル名`: <br>ファイルに名前をつけて生成
- `cat ファイル名`: <br>ファイルの中身を取得 *(Concatenate = 連結)* <br>🤛 *複数のファイルを標準出力に連結して表示*
- `cp 元のファイル名 作りたいファイル名`: <br>ファイルをコピーして生成 *(Copy)*
- `mv 変更前のファイル名 変更後のファイル名`: <br>ファイル名を変更
- `rm ファイル名`: <br>指定したファイルを削除

  #### ファイル内の検索

  - `wc ファイル名`: <br>「行数 単語数 バイト数 ファイル名」を表示 *(Word Count)*  <br>⚠️ *日本語テキストの場合、単語の区切りが不明確なため期待通りの単語数が表示されないことがある*
    - `wc -l`: 「行数 ファイル名」のみを取得 *(Line)*

  - `head -行数 ファイル名`: <br>先頭から「指定した行数」だけを取得

  - `tail -行数 ファイル名`: <br>最後の「指定した行数」だけを取得

  - `grep '単語' ファイル名`: <br>「検索したい単語」が含まれる**行**を表示 <br> 🤛 *大文字・小文字を区別する（`-i` で無視）* <br> 🤛 *正規表現も使える*



  #### ページャ (`more`, `less`)

  - `more ファイル名`: <br>長大なファイルの一部を、画面高に収まる部分だけ表示する *(全体の何%が表示されているかが下端に表示される)*
    - `Spaceキー`: **次ページ**を表示
    - `q`: ページャを終了

  - `less ファイル名`: <br>`more`と同じく長大なファイルの一部を表示することに加え、以下の操作が可能
    - `/検索したい単語`: <br>`/`の後に検索語を入力すると、ファイル内を**検索**し、その箇所まで**移動**する
    - `n`: 次の検索結果まで移動する *(Next)*


### 検索のいろいろ

  #### ワイルドカード （`*`, `?`, `[]`, `{}`）

  - 例）`*文字列`: <br>任意の文字列(`.`を含む)で始まり、指定した文字列で終わる項目を検索して表示

  - 例）`s?????`: <br>`s`で始まる6文字の項目を検索して表示

  - 例）`{ps}?????`: <br>`p`または`s`で始まる6文字の項目を検索して表示

  - 例）`[f-h]*`: <br>`f`から`h`の範囲(`-`)の文字を頭文字とする項目を検索して表示

  - 例）`{sh,ho}*`: <br>`sh`または`ho`で始まる項目を検索して表示 <br>⚠️ *`,`の後に「空白」を入れない！*


### アクセス権限について

- `whoami`: <br>現在ログインしているユーザーの名前を表示
- `groups`: <br>ユーザーがどのグループに属しているかを表示

- `ls -l`: <br>ディレクトリ内の**詳細な情報**をリスト表示 *(Long List format)*

  #### `ls -l`の表示例
  ```
  total 0  # ディレクトリ内で使用しているブロック数(使用ディスク量)
  -rw-r--r-- 1 dotinsta wheel 0 Jan 27 15:39 index.html
  ```
  | `-rw-r--r--` | `1` | `dotinsta` | `wheel` | `0` | `Jan 27 15:39` | `index.html` |
  | --- | --- | --- | --- | --- | --- | --- |
  | ファイルタイプ / アクセス権 | ハードリンクの数 | 所有者名 | グループ名 | サイズ | タイムスタンプ | ファイル名 |

  #### ファイルタイプとアクセス権
  ```
  # 表示例
  drwxr-xr-x
  ```
  | `d` | `rwx` | `r-x` | `r-x` |
  |:---:|:---:|:---:|:---:|
  | ファイルタイプ | `u`: user<br>🤛 **所有するユーザー**のアクセス権 | `g`: group<br>🤛 **所有するグループ**のアクセス権 | `o`: other<br>🤛 **その他のユーザー**のアクセス権 |

  - ファイルタイプ
    | 表示 | ファイルタイプ |
    | :---: | :---: |
    | `-` | 通常のファイル |
    | `d` | ディレクトリ |
    | `l` | シンボリックリンク |

  - アクセス権限（ファイルモード）
    | 表示 | ファイルモード |
    | :---: | :---: |
    | `r` | 読み取り可 *(Read)* |
    | `w` | 書き込み可 *(Write)* |
    | `x` | 実行可 *(eXecute)* <br>(ディレクトリの場合は「アクセス可」)|


  #### アクセス権の変更

  - `chmod`: アクセス権を変更するコマンド *(Change Mode)*

    ##### 実行例

      | コマンド | 実行結果 |
      | --- | :---: |
      | `chmod a=rwxrwxrwx ファイル名` <br>`chmod a=rwx ファイル名` | `-rwxrwxrwx`<br>🤛 *全ての権限を付加* |
      | `chmod g=rw,o=r ファイル名` | `-rwxrw-r--`<br>🤛 *「グループ」は`rw`、「その他」は`r`だけを付加* |
      | `chmod g+x,o-r ファイル名` | `-rwxrwx---`<br>🤛 *上の状態から、「グループ」に`x`を付加、「その他」から`r`を削除* |
      | `chmod 666 ファイル名` | `-rw-rw-rw-`<br>🤛 *全てを`rw`だけにする* |

    - 権限の変更を数値で指定するには、`rwx`を２進法に読替えて導いた値を加算した数値によって表す

      | アクセス権限 | 数値指定の計算方法 |
      | :---: | --- |
      | `r` | **2の2乗**に対応 → `r`権限付加のときは **4** |
      | `w` | **2の1乗**に対応 → `w`権限付加のときは **2** |
      | `x` | **2の0乗**に対応 → `x`権限付加のときは **1** |
      | `rwx` | **7** *= 4+2+1* |
      | `rw-` | **6** *= 4+2+0* |
      | `r--` | **4** *= 4+0+0* |
      | `---` | **0** *= 0+0+0* |

  - `sudo`: 一時的に**ルートユーザー**の権限を使うコマンド *(Superuser)*
