- [卒制](https://github.com/QynToKey/HowLongWillItLast)のための`README`修正など

---
## Git Tips

### PRマージ後のブランチ削除とローカル同期

  - PRをマージ後にブランチを削除しても、「PRの履歴（コメント・レビュー・差分）」は消えない
  - GitHub（ブラウザ）の **「Delete branch」ボタンは安全**
    <br>👉 *削除されるのは `リモートの feature ブランチ`のみ*
  - ブラウザ操作では **main に戻る必要はない**（ローカルの概念とは無関係）

  #### マージ後にローカルでやること

  ```bash
  git switch main
  git pull origin main
  ```

  #### リモート追跡ブランチの確認

  ```bash
  git branch -r
  ```

  #### リモートで削除されたブランチを掃除

  ```bash
  git fetch --prune
  ```

  #### クリーンな状態の例

  ```text
  origin/HEAD -> origin/main
  origin/main
  ```

  👉 *`feature ブランチ`が残っていなければOK*

---

### `git checkout` と `git switch`

  #### 概説

  - `Git 2.23`（2019年）以前
    - `git checkout` がブランチ操作・ファイル操作をすべて担っていた
  - `Git 2.23` 以降
    - 誤操作防止のため `git switch` / `git restore` が追加された

  👉 *`git checkout` は多機能すぎた*

  1. ブランチの切り替え
  2. 新しいブランチの作成
  3. 過去コミットへの移動（detached HEAD）
  4. ファイルを過去の状態に戻す

  ```bash
  git checkout main          # ブランチ切り替え
  git checkout -b feature    # ブランチ作成＋切り替え
  git checkout HEAD~1        # detached HEAD
  git checkout -- file.txt   # ファイルを戻す
  ```

  👉 *初学者にとって危険で分かりにくいため、役割をわけた*


  #### 役割分離：`switch` と `restore`

  - `git switch`（**ブランチ操作専用**）
    - ブランチの切り替え
    - ブランチの作成
    - **ファイル操作はできない**（安全）

  ```bash
  git switch main
  git switch -c feature # -c は'Create'
  ```

  - `git restore`（**ファイル操作専用**）
    - ファイルを元に戻す
    - ステージングの解除など

  ```bash
  # 作業ツリーの変更を最後のコミット（HEAD）の状態に戻す
    git restore ファイル名

  # ステージングを解除する
    git restore --staged ファイル名

  # HEAD~1（1つ前のコミット時点）の ファイルを作業ツリーに復元する
  git restore --source=HEAD~1 ファイル名
  ```
  | 表現       | 指すもの     |
  | -------- | -------- |
  | 直近のコミット  | `HEAD`   |
  | 1つ前のコミット | `HEAD~1` |


  #### 対応関係まとめ

  | 目的       | 旧                      | 新                  |
  | -------- | ---------------------- | ------------------ |
  | ブランチ切り替え | `git checkout main`    | `git switch main`  |
  | ブランチ作成   | `git checkout -b f`    | `git switch -c f`  |
  | ファイルを戻す  | `git checkout -- file` | `git restore file` |

  #### 実務的に推奨される使い分け

  - 自分の操作：`git switch` / `git restore`
  - 古い記事・他人の説明を読む：`git checkout` を脳内変換
    ```bash
    `git checkout -b foo`
    ↓
    `git switch -c foo`
    ```

  👉 `git checkout` は **今も使える**
  <br>👉 新規ユーザーには `switch` / `restore` が推奨
